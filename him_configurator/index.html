<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.103.1" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/hierarchical_information_model/images/fav.png" type="image/x-icon" />

    <title>HIM configurator :: Commercial Vehicle Information Specifications (CVIS)</title>

    
    <link href="/commercial-vehicle-information-specifications/css/nucleus.css?1742807553" rel="stylesheet">
    <link href="/commercial-vehicle-information-specifications/css/fontawesome-all.min.css?1742807553" rel="stylesheet">
    <link href="/commercial-vehicle-information-specifications/css/hybrid.css?1742807553" rel="stylesheet">
    <link href="/commercial-vehicle-information-specifications/css/featherlight.min.css?1742807553" rel="stylesheet">
    <link href="/commercial-vehicle-information-specifications/css/perfect-scrollbar.min.css?1742807553" rel="stylesheet">
    <link href="/commercial-vehicle-information-specifications/css/auto-complete.css?1742807553" rel="stylesheet">
    <link href="/commercial-vehicle-information-specifications/css/atom-one-dark-reasonable.css?1742807553" rel="stylesheet">
    <link href="/commercial-vehicle-information-specifications/css/theme.css?1742807553" rel="stylesheet">
    <link href="/commercial-vehicle-information-specifications/css/hugo-theme.css?1742807553" rel="stylesheet">
    
    <link href="/commercial-vehicle-information-specifications/css/theme-blue.css?1742807553" rel="stylesheet">
    
    

    <script src="/commercial-vehicle-information-specifications/js/jquery-3.3.1.min.js?1742807553"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/commercial-vehicle-information-specifications/him_configurator/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://covesa.github.io/commercial-vehicle-information-specifications/">
  <img src="/commercial-vehicle-information-specifications/images/cvis.png">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/commercial-vehicle-information-specifications/js/lunr.min.js?1742807553"></script>
<script type="text/javascript" src="/commercial-vehicle-information-specifications/js/auto-complete.js?1742807553"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/covesa.github.io\/commercial-vehicle-information-specifications\/";
    
</script>
<script type="text/javascript" src="/commercial-vehicle-information-specifications/js/search.js?1742807553"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/commercial-vehicle-information-specifications/bus_tree/" title="Bus tree" class="dd-item
        
        
        
        ">
      <a href="/commercial-vehicle-information-specifications/bus_tree/">
          Bus tree
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/commercial-vehicle-information-specifications/driver_tree/" title="Driver tree" class="dd-item
        
        
        
        ">
      <a href="/commercial-vehicle-information-specifications/driver_tree/">
          Driver tree
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/commercial-vehicle-information-specifications/him_configurator/" title="HIM configurator" class="dd-item
        
        active
        
        ">
      <a href="/commercial-vehicle-information-specifications/him_configurator/">
          HIM configurator
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/commercial-vehicle-information-specifications/trailer_tree/" title="Trailer tree" class="dd-item
        
        
        
        ">
      <a href="/commercial-vehicle-information-specifications/trailer_tree/">
          Trailer tree
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/commercial-vehicle-information-specifications/truck_tree/" title="Truck tree" class="dd-item
        
        
        
        ">
      <a href="/commercial-vehicle-information-specifications/truck_tree/">
          Truck tree
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/commercial-vehicle-information-specifications/truck_tree/driver_tree/" title="Driver tree" class="dd-item
        
        
        
        ">
      <a href="/commercial-vehicle-information-specifications/truck_tree/driver_tree/">
          Driver tree
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/commercial-vehicle-information-specifications/vss-core_tree/" title="VSS-core tree" class="dd-item
        
        
        
        ">
      <a href="/commercial-vehicle-information-specifications/vss-core_tree/">
          VSS-core tree
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/covesa/commercial-vehicle-information-specifications"><i class='fab fa-github'></i> Github repo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/covesa/commercial-vehicle-information-specifications/edit/master/docs/docs-gen/content/him_configurator/_index.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/commercial-vehicle-information-specifications/'>Commercial Vehicle Information Specifications</a> > HIM configurator
          
        
          
        
                 
                  </span>
                </div>
                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
          <div id="chapter">
        
        <div id="body-inner">
          

        



	<h1 id="him-configurator">HIM configurator</h1>
<h2 id="build-instructions">Build instructions</h2>
<p>To build the HIM configurator it is necessary to first instal the Golang build system. Searching on &ldquo;install golang&rdquo; will lead to many matches of which one is:</p>
<p><a href="https://go.dev/doc/install">https://go.dev/doc/install</a></p>
<p>To build the HIM configurator, open a terminal and go to the spec/trees directory where the himConfigurator.go is stored, and issue the command</p>
<p>$ go build -o himConfigurator</p>
<h2 id="initializing-the-python-virtual-environment">Initializing the Python virtual environment</h2>
<p>The HIM configurator uses the VSS-tools exporters for the generation of the transformed vspec files.
According to the <a href="https://github.com/COVESA/vss-tools/blob/master/README.md">instructions</a>
for this tool a Python virtual environment should be set up in which it then is run when exporting the vspec files to other formats.
The work flow is to the first time initialize this environment, and then every time before running the HIM configurator
activate the virtual environment, and when done terminate the virtual environment.</p>
<p>If the virtual environment has not been set up before on the computer, it could e. g. already has been used in a VSS context to transform vspec files,
then the first time it needs to be created and configured.
To create it issue the following command:</p>
<pre tabindex="0"><code>$ python3 -m venv ~/.venv
</code></pre><p>Then it needs to be configured for VSS-tools, which shall be done with the environment activated:</p>
<pre tabindex="0"><code>$ source ~/.venv/bin/activate
(.venv)$ pip install --pre vss-tools
(.venv)$ deactivate
</code></pre><p>The above is only needed to be done once.
It might be necessary to install both python and pip if that is not already installed on the computer.</p>
<p>To then use the HIM configurator it is sufficient with activating the virtual environment before using the HIM configurator.</p>
<pre tabindex="0"><code>$ source ~/.venv/bin/activate
</code></pre><p>Then the HIM configurator can be run in the spec/trees directory with commands like:</p>
<pre tabindex="0"><code>(.venv)$ ./himConfigurator -m binary -v Vehicle/Trailer/
</code></pre><p>Finally the environment shall be deactivated it after the use.</p>
<pre tabindex="0"><code>(.venv)$ deactivate
</code></pre><p>If the HIM configurator complains with error logs it may help to, one time, try the command:</p>
<pre tabindex="0"><code>(.venv)$ pip install -e .
</code></pre><p>A bash script file in the spec/trees directory, venv.sh, can be used instead of typing the commands manually in the terminal window.
If this file is issued as shown below it responds with displaying the two supported usages.</p>
<pre tabindex="0"><code>$ source venv.sh 
usage: source venv.sh startme|installme
</code></pre><p>As shown it can either be used to install venv, which as described above is only needed to be run the very first time.
The other alternative can thereafter be used to activate venv.</p>
<h2 id="using-the-him-configurator">Using the HIM configurator</h2>
<p>Starting the HIM configurator with the command:</p>
<p>(.venv)$ ./himConfigurator -h</p>
<p>will show the command line options that is possible to apply at startup.</p>
<pre tabindex="0"><code>usage: print [-h|--help] [-m|--makecommand (all|yaml|json|csv|binary)]
             [-c|--configfile &#34;&lt;value&gt;&#34;] [-r|--rootdir &#34;&lt;value&gt;&#34;]
             [-s|--vspecsave] [-p|--preprocess] [-n|--noEnumSubst]
             [-v|--configvaluesfile &#34;&lt;value&gt;&#34;]

             HIM configurator

Arguments:

  -h  --help              Print help information
  -m  --makecommand       Make command parameter must be either: all, yaml,
                          json, csv, or binary. Default: yaml
  -c  --configfile        configuration file name. Default:
                          himConfig-truck.json
  -r  --rootdir           path to vspec root directory. Default:
                          Vehicle/VSS-core/
  -s  --vspecsave         Saves the configured .vspec2 files with extension
                          .vspec
  -p  --preprocess        Pre-process only, save configured vspec files. Do not
                          run VSS-tools.
  -n  --noEnumSubst       No substitution of enum links to Datatype tree with
                          actual datatypes
  -v  --configvaluesfile  Config values file name
</code></pre><p>The -m command line option is used to set which VSS-tools exporter the configured tree should have.
The value &lsquo;all&rsquo; leads to that all the exporters that are compatible with the HIM configurator are executed.
If not used the default is &lsquo;yaml&rsquo;.</p>
<p>The -c command line option is used to select the HIM configurator file. This is useful when a tree has multiple configuration files.
Default is himConfig-truck.json.</p>
<p>The -r command line option is used to set the path to the tree that should be used as input for the configuration.
The path is relative to the tree directory, and should have the slash &lsquo;/&rsquo; character at the end of the path.
If not used the default is &lsquo;Vehicle/VSS-core/&rsquo;.</p>
<p>If the -s command  is set the the HIM configurator does not delete the vspec files that it generates from the vspec2 files that are found in the tree structure.
If not set these vspec files are deleted after being used as input to the call of the VSS-tools exporter(s).
If not used the default is false, i. e. not to save the files.<br>
With the vspec files saved it becomes possible to run the VSS-tols exporters &ldquo;manually&rdquo; with the vspec root node as input.
This might be helpful if the development environment is not a Linux compatible environment,
or if there is a need to debug the VSS-tools processing, se below.</p>
<p>The -p command leads to that the HIM configurator does not issue a command to the VSS-tools exporters.
If the -v command also was set, then the vspec files generated by the HIM configurator is saved, see above,
and the VSS-tools exporters can be activated &ldquo;manually&rdquo; with the pre-processed tree as input.</p>
<p>The -n command line option is used if substitution is not desired of the external datatype references with the actual enum definitions
from the common Datatypes tree in the generated tree(s). However, VSS-tools currently does not accept the syntax using a reference.</p>
<p>The -v command line option is used to configure nodes with a default value that is defined in the named file.</p>
<h2 id="vss-tools-debug">VSS-tools debug</h2>
<p>&lsquo;in the development of the trees it might happen that errors are introdued in the vspec2/vspec files.
VSS-tools have a compehensive error logging support, but this does not show up in the HIM configurator UI.
It is however possible to get this error logging support by manually issuing a make command in a terminal window
on the make file in the cvis root catalog, after first running the HIM configurator on the tree under development,
with the -v CLI parameter so that the vspec files are saved.
The make command shall then have the following general format:</p>
<pre tabindex="0"><code>make yaml VSPECROOT=./spec/trees/Vehicle/Truck/TruckSignalSpecification.vspec
</code></pre><p>where yaml can be replaced by any other supported exporter, and the path to the root vspec file could be to any tree in the CVIS &ldquo;forest&rdquo;.
The VSS-tools error logging will then be shown in the terminal window.</p>
<h2 id="creation-of-a-vehicle-variant-specific-signal-tree">Creation of a vehicle variant specific signal tree</h2>
<p>The HIM configurator enables a model where a &ldquo;super tree&rdquo; covering all variations that a vehicle may be equipped with,
e. g. propulsion technology like ICE, PHEV, EV, etc. can be defined in the vspec files,
then the HIM configurator can be used to create a &ldquo;variant specific&rdquo; vehicle signal tree from the variation point configuration in the himConfiguration.json file.</p>
<h2 id="usage-of-a-vehicle-variant-specific-signal-tree">Usage of a vehicle variant specific signal tree</h2>
<p>The output from the HIM configurator is the selected parts of the &ldquo;vspec super tree&rdquo; in a file with one of the supported formats.
This file can then e. g. be used in a vehicle of the selected variant by a server that is managing the access to the signals.
The server can then use the tree to &ldquo;vet&rdquo; client request - checking that the signal is present, whether it is read-only or read-write,
that credentials are valid if access control is applied, etc.
An example of a server using it like this is the <a href="https://github.com/COVESA/vissr">VISS reference server</a>.</p>





<footer class=" footline" >
	
</footer>

        
            </div> 
        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/commercial-vehicle-information-specifications/driver_tree/" title="Driver tree"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/commercial-vehicle-information-specifications/trailer_tree/" title="Trailer tree" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/commercial-vehicle-information-specifications/js/clipboard.min.js?1742807553"></script>
    <script src="/commercial-vehicle-information-specifications/js/perfect-scrollbar.min.js?1742807553"></script>
    <script src="/commercial-vehicle-information-specifications/js/perfect-scrollbar.jquery.min.js?1742807553"></script>
    <script src="/commercial-vehicle-information-specifications/js/jquery.sticky.js?1742807553"></script>
    <script src="/commercial-vehicle-information-specifications/js/featherlight.min.js?1742807553"></script>
    <script src="/commercial-vehicle-information-specifications/js/highlight.pack.js?1742807553"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/commercial-vehicle-information-specifications/js/modernizr.custom-3.6.0.js?1742807553"></script>
    <script src="/commercial-vehicle-information-specifications/js/learn.js?1742807553"></script>
    <script src="/commercial-vehicle-information-specifications/js/hugo-learn.js?1742807553"></script>
    
        
            <script src="/commercial-vehicle-information-specifications/mermaid/mermaid.js?1742807553"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>
